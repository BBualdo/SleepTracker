<back-button></back-button>
<div class="sessions__container">
  <h1>Sessions</h1>
  @if (sessions$ | async; as sessions) {
    <div class="sessions__box">
      <div class="sessions__panel">
        <button class="btn primary__btn" (click)="openAddDialog()">
          Add Session
        </button>
      </div>
      <div class="sessions__header">
        <span>No.</span>
        <span>Start Time</span>
        <span>End Time</span>
        <span>Duration</span>
        <span><mat-icon fontIcon="more_vert"></mat-icon></span>
      </div>

      <div class="sessions">
        @if (sessions.length > 0) {
          @for (session of sessions; track $index) {
            <div class="session">
              <span>{{ $index + 1 }}</span>
              <span>{{
                formatDate(session.startTime, "dd.MM.yyyy HH:mm", "en-US")
              }}</span>
              <span>{{
                formatDate(session.endTime, "dd.MM.yyyy HH:mm", "en-US")
              }}</span>
              <span>{{ getDuration(session.durationInMinutes) }}</span>
              <div class="buttons">
                <button class="edit__btn">
                  <mat-icon fontIcon="edit"></mat-icon>
                </button>
                <button class="delete__btn" (click)="confirmDelete(session)">
                  <mat-icon fontIcon="delete"></mat-icon>
                </button>
              </div>
            </div>
          }
        } @else {
          <p class="no-sessions">No sessions yet.</p>
        }
      </div>
    </div>
  } @else {
    <div class="spinner">
      <mat-spinner></mat-spinner>
    </div>
  }
</div>
